[{"@class":"DataStreamHeader","kind":"DeploymentPackageHeader","version":1},{"class":"Package","id":"9a69f261-e0c5-46bd-9aab-14c6be29b661","name":"cdr-1.7.002.6","deploymentPackageVersion":1,"applicationName":"Symphonic admin-point-application","applicationVersion":"8.11.0","dateCreated":"2021-04-22T01:23:49.466289Z","createdBy":"admin","snapshotId":"65165dc9-5b51-40eb-8c77-8a0de8aa285b","snapshotMessage":"cdr-1.7.002.6","snapshotDateCommitted":"2021-04-22T01:23:39.958614Z","rootEntityId":"e51688ff-1dc9-4b6c-bb36-8af64d02e9d1","rootEntityName":"Global Decision Point","enabledFeatures":[]},{"class":"AttributeDefinition","id":"a007b39b-33ca-436c-977f-21a4831daa96","name":"HttpRequest","resolvers":[{"class":"request","condition":null,"expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"JSON"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"8e568465-2e7c-4705-8d94-53102ea8550f","name":"HttpRequest.AccessToken","resolvers":[{"class":"attribute","attributeDefinitionId":"a007b39b-33ca-436c-977f-21a4831daa96","condition":null,"expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"JSON","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"AccessToken"}]}},{"type":"coerce","valueType":"JSON"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"9d722951-77a8-4ae6-94f9-6ced4adfee17","name":"HttpRequest.AccessToken.active","resolvers":[{"class":"attribute","attributeDefinitionId":"8e568465-2e7c-4705-8d94-53102ea8550f","condition":null,"expression":null}],"defaultValue":"false","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"BOOLEAN","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.active"}]}},{"type":"coerce","valueType":"BOOLEAN"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"120c0f19-cdc0-395a-96d8-a8c54d1902ab","attributeDefinitionId":"9d722951-77a8-4ae6-94f9-6ced4adfee17"},{"class":"ConstantNode","id":"1bf374de-5983-36ae-8a8b-3aae4ffdc7e6","constant":"false"},{"class":"ComparisonNode","id":"d8c2cda2-2e69-33c2-9680-afd1fdffdee7","lhsInputNode":"120c0f19-cdc0-395a-96d8-a8c54d1902ab","rhsInputNode":"1bf374de-5983-36ae-8a8b-3aae4ffdc7e6","operator":"EQUALS"},{"class":"RequestAxis","id":"7545ec80-a6cc-374a-aac0-7249b28deb71","type":"ACTION"},{"class":"ConstantNode","id":"fb4476eb-ffe8-3ca6-b56f-218aba033631","constant":"inbound-DELETE"},{"class":"ComparisonNode","id":"7f59f236-4510-365d-b7f0-7292e5ee0673","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"fb4476eb-ffe8-3ca6-b56f-218aba033631","operator":"EQUALS"},{"class":"ConstantNode","id":"46a4d66b-baf9-39e2-9ebb-acb4b24bd21b","constant":"inbound-GET"},{"class":"ComparisonNode","id":"e7e845ee-9546-3098-92ef-8afdbf6795b6","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"46a4d66b-baf9-39e2-9ebb-acb4b24bd21b","operator":"EQUALS"},{"class":"ConstantNode","id":"c70d29ae-3119-3571-a2a9-a28c145433a6","constant":"inbound-PATCH"},{"class":"ComparisonNode","id":"d4b65d60-8d1c-37d4-a6bd-a6b8410a8267","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"c70d29ae-3119-3571-a2a9-a28c145433a6","operator":"EQUALS"},{"class":"ConstantNode","id":"49a8e615-d2e0-307b-bfd8-aced12f552bf","constant":"inbound-POST"},{"class":"ComparisonNode","id":"25298459-1b98-380a-9ab2-a81b4f25e3b3","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"49a8e615-d2e0-307b-bfd8-aced12f552bf","operator":"EQUALS"},{"class":"ConstantNode","id":"5eceedf0-cd3f-3533-aeeb-5f7a139845f5","constant":"inbound-PUT"},{"class":"ComparisonNode","id":"3618b139-1668-3444-b2f0-8152f6e6bed8","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"5eceedf0-cd3f-3533-aeeb-5f7a139845f5","operator":"EQUALS"},{"class":"BooleanLogicNode","id":"6e0ea8b1-82b0-3170-88ce-075e877d81ae","inputNodes":["7f59f236-4510-365d-b7f0-7292e5ee0673","e7e845ee-9546-3098-92ef-8afdbf6795b6","d4b65d60-8d1c-37d4-a6bd-a6b8410a8267","25298459-1b98-380a-9ab2-a81b4f25e3b3","3618b139-1668-3444-b2f0-8152f6e6bed8"],"operator":"or"},{"class":"ConditionDefinition","id":"cd212c60-6cf3-4156-9c17-a32162fdda6a","name":"Any Inbound Request","condition":"6e0ea8b1-82b0-3170-88ce-075e877d81ae","properties":{}},{"class":"ConditionReferenceNode","id":"36e18bf2-13bc-3ae4-ad1a-9c65d9fbb215","definitionId":"cd212c60-6cf3-4156-9c17-a32162fdda6a"},{"class":"ConstantNode","id":"440d5479-b2cb-3d13-a912-fb40f6173169","constant":"create"},{"class":"ComparisonNode","id":"e8c29a21-0d4e-3ec6-b75d-f6cdb92bef3d","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"440d5479-b2cb-3d13-a912-fb40f6173169","operator":"EQUALS"},{"class":"ConstantNode","id":"652fa371-4b62-313a-a79a-b1b26ed5378b","constant":"delete"},{"class":"ComparisonNode","id":"da1ce910-e5d3-321e-95bb-24529f1c74d7","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"652fa371-4b62-313a-a79a-b1b26ed5378b","operator":"EQUALS"},{"class":"ConstantNode","id":"3119a1cf-31cd-3e8a-93c1-302316681fd4","constant":"modify"},{"class":"ComparisonNode","id":"5032d904-24ca-31b1-a08d-dea6a36ea4f9","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"3119a1cf-31cd-3e8a-93c1-302316681fd4","operator":"EQUALS"},{"class":"ConstantNode","id":"dc92adad-3c5c-348f-af61-310d27e21758","constant":"retrieve"},{"class":"ComparisonNode","id":"25b189de-dcbf-3c64-bf8d-218c7e77d7f3","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"dc92adad-3c5c-348f-af61-310d27e21758","operator":"EQUALS"},{"class":"ConstantNode","id":"e19181c0-824d-3aa9-83d4-f2ed7d809d34","constant":"search"},{"class":"ComparisonNode","id":"9c2f2dd9-1e8a-32c7-8a89-2864996bb515","lhsInputNode":"7545ec80-a6cc-374a-aac0-7249b28deb71","rhsInputNode":"e19181c0-824d-3aa9-83d4-f2ed7d809d34","operator":"EQUALS"},{"class":"BooleanLogicNode","id":"bc3f2986-053d-3614-8208-9cad1a39447f","inputNodes":["e8c29a21-0d4e-3ec6-b75d-f6cdb92bef3d","da1ce910-e5d3-321e-95bb-24529f1c74d7","5032d904-24ca-31b1-a08d-dea6a36ea4f9","25b189de-dcbf-3c64-bf8d-218c7e77d7f3","9c2f2dd9-1e8a-32c7-8a89-2864996bb515"],"operator":"or"},{"class":"ConditionDefinition","id":"5d9208da-b746-4b0d-b741-b6eabc66e71c","name":"Any SCIM or OpenBanking Request","condition":"bc3f2986-053d-3614-8208-9cad1a39447f","properties":{}},{"class":"ConditionReferenceNode","id":"da6d2591-8626-37ee-ae63-fd4e0a00a5ed","definitionId":"5d9208da-b746-4b0d-b741-b6eabc66e71c"},{"class":"BooleanLogicNode","id":"62841d6b-4b60-34df-b3bf-305fb9d4f288","inputNodes":["36e18bf2-13bc-3ae4-ad1a-9c65d9fbb215","da6d2591-8626-37ee-ae63-fd4e0a00a5ed"],"operator":"or"},{"class":"BooleanLogicNode","id":"c76c9b72-a90e-3d24-ac07-d6bfd7dc3e4a","inputNodes":["d8c2cda2-2e69-33c2-9680-afd1fdffdee7","62841d6b-4b60-34df-b3bf-305fb9d4f288"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"f9604cb4-315d-47eb-9e76-4d8c7534bb41","name":"Access token is inactive","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"c476df05-12c7-3d7a-8de7-fe364f3fdcb1","metadataId":"f9604cb4-315d-47eb-9e76-4d8c7534bb41","effect":"DENY","inputNode":"c76c9b72-a90e-3d24-ac07-d6bfd7dc3e4a"},{"class":"StatementNode","id":"9f3a2bf5-6225-3725-912f-4aac1cb7d85a","inputNode":"c476df05-12c7-3d7a-8de7-fe364f3fdcb1","metadataId":"f9604cb4-315d-47eb-9e76-4d8c7534bb41","statements":[]},{"class":"TargetMatchNode","id":"29ad80d8-f3be-3c6e-86e7-b7725cc1b7b4","inputNode":"9f3a2bf5-6225-3725-912f-4aac1cb7d85a","metadataId":"f9604cb4-315d-47eb-9e76-4d8c7534bb41","targets":[]},{"class":"Metadata","originType":"Policy","originId":"69d82f74-5561-4f91-b238-0f8bbac97532","name":"Token Validation","properties":{},"disabled":false,"repetitionSettings":null},{"class":"AlwaysTrueNode","id":"6b0617b1-260a-362a-b56a-09d987f60632"},{"class":"CombinedDecisionNode","id":"646ba476-5df7-3ebf-8092-bbbc4e95349a","combiningAlgorithm":{"name":"PermitUnlessDeny"},"inputNodes":["29ad80d8-f3be-3c6e-86e7-b7725cc1b7b4"],"inputNodeWeights":[100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"69d82f74-5561-4f91-b238-0f8bbac97532"},{"class":"StatementTemplate","id":"cde26a38-2035-4385-bbfe-159ee1822976","name":"Invalid Token","code":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"denied-reason"}]},"payload":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"{\"status\":401, \"message\": \"invalid_token\", \"detail\":\"Access token is expired or otherwise invalid\"}"}]},"obligatory":true,"appliesTo":"DENY","attributes":{},"services":{}},{"class":"StatementNode","id":"d7aeda8d-8599-3e8c-b874-9a2102be305c","inputNode":"646ba476-5df7-3ebf-8092-bbbc4e95349a","metadataId":"69d82f74-5561-4f91-b238-0f8bbac97532","statements":["cde26a38-2035-4385-bbfe-159ee1822976"]},{"class":"TargetMatchNode","id":"296b80e0-3967-3376-ab6a-49521b0bc76e","inputNode":"d7aeda8d-8599-3e8c-b874-9a2102be305c","metadataId":"69d82f74-5561-4f91-b238-0f8bbac97532","targets":[]},{"class":"ConstantNode","id":"0420d4f9-6682-36bd-b12f-91b0ef6e4fd3","constant":"true"},{"class":"ComparisonNode","id":"dd389792-df63-398d-a7c6-6e00fb69f410","lhsInputNode":"120c0f19-cdc0-395a-96d8-a8c54d1902ab","rhsInputNode":"0420d4f9-6682-36bd-b12f-91b0ef6e4fd3","operator":"NOT_EQUALS"},{"class":"BooleanLogicNode","id":"9f2a6cd3-ff17-3542-9c3d-4f843ae57e63","inputNodes":["dd389792-df63-398d-a7c6-6e00fb69f410"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"81597501-fef1-4345-a351-626ec9364575","name":"Token is inactive","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"bc423658-4d5a-3dd8-ba4d-0807fdd204ad","metadataId":"81597501-fef1-4345-a351-626ec9364575","effect":"DENY","inputNode":"9f2a6cd3-ff17-3542-9c3d-4f843ae57e63"},{"class":"StatementNode","id":"2fd4b302-5c08-3e2c-93b5-90843ba736db","inputNode":"bc423658-4d5a-3dd8-ba4d-0807fdd204ad","metadataId":"81597501-fef1-4345-a351-626ec9364575","statements":[]},{"class":"TargetMatchNode","id":"80836c7e-6e93-31c5-bc24-052667b8d4c2","inputNode":"2fd4b302-5c08-3e2c-93b5-90843ba736db","metadataId":"81597501-fef1-4345-a351-626ec9364575","targets":[]},{"class":"AttributeDefinition","id":"447bf9bf-0cf0-4b62-9b55-58fc9f606f49","name":"HttpRequest.AccessToken.scope","resolvers":[{"class":"attribute","attributeDefinitionId":"8e568465-2e7c-4705-8d94-53102ea8550f","condition":null,"expression":null}],"defaultValue":"[]","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"COLLECTION","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"scope"}]}},{"type":"coerce","valueType":"COLLECTION"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","attributeDefinitionId":"447bf9bf-0cf0-4b62-9b55-58fc9f606f49"},{"class":"ConstantNode","id":"e3f58755-7ec4-363e-9d88-17f59cfe36ba","constant":"urn:pingdatagovernance:pdp"},{"class":"ComparisonNode","id":"da604051-cd62-3cc7-9448-222ad8f2f2af","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"e3f58755-7ec4-363e-9d88-17f59cfe36ba","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"8e339447-9124-3598-a458-467e3e7993c4","inputNodes":["da604051-cd62-3cc7-9448-222ad8f2f2af"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"5230e2e9-cf6a-4b38-88cd-c40ac56bb2d9","name":"Token does not contain PDP scope","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"70395307-b6cf-3e87-8acd-31d91748d613","metadataId":"5230e2e9-cf6a-4b38-88cd-c40ac56bb2d9","effect":"DENY","inputNode":"8e339447-9124-3598-a458-467e3e7993c4"},{"class":"StatementNode","id":"901f4509-90ef-3eaf-8c4e-9b7b9c54d3f9","inputNode":"70395307-b6cf-3e87-8acd-31d91748d613","metadataId":"5230e2e9-cf6a-4b38-88cd-c40ac56bb2d9","statements":[]},{"class":"TargetMatchNode","id":"d3d2bbca-92e8-39d9-9fa4-8b6b882b3b1d","inputNode":"901f4509-90ef-3eaf-8c4e-9b7b9c54d3f9","metadataId":"5230e2e9-cf6a-4b38-88cd-c40ac56bb2d9","targets":[]},{"class":"Metadata","originType":"Policy","originId":"e792b7ec-331d-422e-8aec-d5ff589889aa","name":"Token Authorization","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"64e4a51a-4491-338b-99d4-7a8e6a2bcb47","combiningAlgorithm":{"name":"DenyOverrides"},"inputNodes":["80836c7e-6e93-31c5-bc24-052667b8d4c2","d3d2bbca-92e8-39d9-9fa4-8b6b882b3b1d"],"inputNodeWeights":[100,100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"e792b7ec-331d-422e-8aec-d5ff589889aa"},{"class":"StatementNode","id":"9d3a1a93-c0ce-3e47-9909-40a9bf0db770","inputNode":"64e4a51a-4491-338b-99d4-7a8e6a2bcb47","metadataId":"e792b7ec-331d-422e-8aec-d5ff589889aa","statements":["cde26a38-2035-4385-bbfe-159ee1822976"]},{"class":"Target","id":"ba86bc60-6ae8-4e14-a4b7-ba6c5e3a463f","name":"Inline target","domains":[],"services":[],"identityClassIds":[],"actions":["authorize"]},{"class":"TargetMatchNode","id":"cc9c626f-b6d8-3b23-83a7-f1359090ae1a","inputNode":"9d3a1a93-c0ce-3e47-9909-40a9bf0db770","metadataId":"e792b7ec-331d-422e-8aec-d5ff589889aa","targets":["ba86bc60-6ae8-4e14-a4b7-ba6c5e3a463f"]},{"class":"Metadata","originType":"PolicySet","originId":"3e80f4b0-ae1d-48e6-bdab-74c0fe06e6d5","name":"PDP API Endpoint Policies","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"8f64bd93-fcd1-362a-b495-d5b7dd4436e7","combiningAlgorithm":{"name":"PermitUnlessDeny"},"inputNodes":["cc9c626f-b6d8-3b23-83a7-f1359090ae1a"],"inputNodeWeights":[100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"3e80f4b0-ae1d-48e6-bdab-74c0fe06e6d5"},{"class":"StatementNode","id":"f5540718-26d7-31f1-aa92-3f7cfdafa92c","inputNode":"8f64bd93-fcd1-362a-b495-d5b7dd4436e7","metadataId":"3e80f4b0-ae1d-48e6-bdab-74c0fe06e6d5","statements":[]},{"class":"Target","id":"e41403c2-589e-4981-a088-3e004aef4d59","name":"Inline target","domains":[],"services":["PDP"],"identityClassIds":[],"actions":[]},{"class":"TargetMatchNode","id":"65ecd853-cb06-3565-9457-d1a4cc2416dc","inputNode":"f5540718-26d7-31f1-aa92-3f7cfdafa92c","metadataId":"3e80f4b0-ae1d-48e6-bdab-74c0fe06e6d5","targets":["e41403c2-589e-4981-a088-3e004aef4d59"]},{"class":"AttributeDefinition","id":"ee41314a-eb03-4a6e-9561-82ff8dd13865","name":"HttpRequest.AccessToken.subject","resolvers":[{"class":"attribute","attributeDefinitionId":"8e568465-2e7c-4705-8d94-53102ea8550f","condition":null,"expression":null}],"defaultValue":"_null","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"sub"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"c2284af5-caa5-48b1-b5a6-418cec688cb3","name":"CDRAttributes.ConsentAPIToken","resolvers":[],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"JSON","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"'{\"sub\":\"' + "},{"@class":"Interpolation","hole":"ee41314a-eb03-4a6e-9561-82ff8dd13865","safelyInterpolatable":false},{"@class":"FixedTemplate","x":" +'\",\"active\":true,\"scope\":\"consent\"}'"}]}},{"type":"coerce","valueType":"JSON"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"b8e0627f-47a0-49c8-9fbc-256735322452","name":"Configuration.PINGDIRECTORY_HOSTNAME","resolvers":[{"class":"configuration","key":"PINGDIRECTORY_HOSTNAME","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"a0b6f5b9-6a50-4c11-88fb-544d8e6a326d","name":"CDRAttributes.access_token_raw","resolvers":[{"class":"attribute","attributeDefinitionId":"8e568465-2e7c-4705-8d94-53102ea8550f","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this.get(\"access_token\")"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"83cb58f0-3825-4e99-9268-f5feeefc5a67","name":"CDRAttributes.access_token_claims_raw","resolvers":[{"class":"attribute","attributeDefinitionId":"a0b6f5b9-6a50-4c11-88fb-544d8e6a326d","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this.split(\"\\.\")[1]"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"9e028503-c6d8-4074-a13c-8a49166c3311","name":"CDRAttributes.access_token_claims","resolvers":[{"class":"attribute","attributeDefinitionId":"83cb58f0-3825-4e99-9268-f5feeefc5a67","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"JSON","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"new java.lang.String(T(java.util.Base64).getDecoder().decode(#this))"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"a874fd45-3fe5-4893-8f9a-967820f86d70","name":"CDRAttributes.cdr_arrangement_id","resolvers":[{"class":"attribute","attributeDefinitionId":"9e028503-c6d8-4074-a13c-8a49166c3311","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.cdr_arrangement_id"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"ServiceDefinition","id":"5dceb2e8-19cc-45a0-8df0-a78eb66e1ce2","name":"Consumer Data Rights.Check Consent API","serviceSettings":{"class":"rest","urlFormat":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"https://"},{"@class":"Interpolation","hole":"b8e0627f-47a0-49c8-9fbc-256735322452","safelyInterpolatable":false},{"@class":"FixedTemplate","x":"/consent/v1/consents/"},{"@class":"Interpolation","hole":"a874fd45-3fe5-4893-8f9a-967820f86d70","safelyInterpolatable":false}]},"body":{"@class":"JoiningTemplate","components":[]},"verb":"GET","contentType":"application/json","headers":[],"authenticationType":"OAUTH2","authenticationAttributes":{"@class":"MapTemplate","map":{"token":{"@class":"Interpolation","hole":"c2284af5-caa5-48b1-b5a6-418cec688cb3","safelyInterpolatable":false}}},"tlsSettings":{"@class":"TlsSettings","tlsValidationType":"NONE","tlsTruststore":null,"mtlsValidation":false,"mtlsKeystore":null}},"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"serviceResilience":{"maximumConcurrentRequests":2,"maximumRequestsPerSecond":1000000.0,"timeoutMilliseconds":2000,"maximumRetryCount":2,"holdoffMilliseconds":1000,"retryStrategy":"FIXED","retryJitter":10.0},"secret":false},{"class":"AttributeDefinition","id":"2ade78e4-0f5e-4cd8-b861-90c4b9c20122","name":"CDRAttributes.consent_record","resolvers":[{"class":"service","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null,"serviceDefinitionId":"5dceb2e8-19cc-45a0-8df0-a78eb66e1ce2"}],"defaultValue":null,"cacheScopeAttributeId":"8e568465-2e7c-4705-8d94-53102ea8550f","cacheTimeToLive":10,"cacheStrategy":"SCOPE_EXPIRE_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"JSON","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"38acbb0b-d93b-4274-a2ec-8491e44d8eb7","name":"CDRAttributes.consent_record.expires","resolvers":[{"class":"attribute","attributeDefinitionId":"2ade78e4-0f5e-4cd8-b861-90c4b9c20122","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"NUMBER","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.consentContext.expires"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"4d3d266e-87e9-3ee4-a21a-9f03abba38ab","attributeDefinitionId":"38acbb0b-d93b-4274-a2ec-8491e44d8eb7"},{"class":"AttributeDefinition","id":"5b6679cb-5f49-4911-b87b-5eb743d557f2","name":"CDRAttributes.current_time","resolvers":[],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"new java.util.Date().getTime()"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"fd887d44-bd22-3141-a3fb-03fcd2d0e439","attributeDefinitionId":"5b6679cb-5f49-4911-b87b-5eb743d557f2"},{"class":"ComparisonNode","id":"8fb4d22f-3217-33a8-b298-1282882a0823","lhsInputNode":"4d3d266e-87e9-3ee4-a21a-9f03abba38ab","rhsInputNode":"fd887d44-bd22-3141-a3fb-03fcd2d0e439","operator":"GREATER_THAN"},{"class":"BooleanLogicNode","id":"80ccf402-fc1d-39db-af11-ead33627dc30","inputNodes":["8fb4d22f-3217-33a8-b298-1282882a0823"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"0af24073-8ea1-4509-8e2d-6dac28cecfec","name":"Check Consent Expiry","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"59019545-9529-33fb-b5d8-1a5460a8be14","metadataId":"0af24073-8ea1-4509-8e2d-6dac28cecfec","effect":"PERMIT","inputNode":"80ccf402-fc1d-39db-af11-ead33627dc30"},{"class":"StatementNode","id":"eec28bf8-1a9d-3090-9c0e-9c2287adc24b","inputNode":"59019545-9529-33fb-b5d8-1a5460a8be14","metadataId":"0af24073-8ea1-4509-8e2d-6dac28cecfec","statements":[]},{"class":"TargetMatchNode","id":"de5098fa-c900-319a-a843-b74634c2ca99","inputNode":"eec28bf8-1a9d-3090-9c0e-9c2287adc24b","metadataId":"0af24073-8ea1-4509-8e2d-6dac28cecfec","targets":[]},{"class":"AttributeDefinition","id":"5144cfde-dbf6-41a1-aa4d-c39199dc986c","name":"CDRAttributes.requested_scope","resolvers":[{"class":"attribute","attributeDefinitionId":"447bf9bf-0cf0-4b62-9b55-58fc9f606f49","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"COLLECTION","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this"}]}},{"type":"coerce","valueType":"COLLECTION"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"1e82965d-0d18-4809-ae2a-f282d9609526","name":"CDRAttributes.consent_record.approved_scopes","resolvers":[{"class":"attribute","attributeDefinitionId":"2ade78e4-0f5e-4cd8-b861-90c4b9c20122","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.data.APPROVED_SCOPES"}]}},{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this.replace(\"[\",\"\").replace(\"]\",\"\").replace('\"',\"\")"}]}},{"type":"SpEL","id":null,"name":null,"valueType":"COLLECTION","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"T(org.springframework.util.CollectionUtils).arrayToList(#this.split(\" \"))"}]}}]},{"type":"coerce","valueType":"COLLECTION"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"0a862c8b-b70f-4ef6-bd4b-99c4448aaf52","name":"CDRAttributes.compare_scope","resolvers":[{"class":"attribute","attributeDefinitionId":"5144cfde-dbf6-41a1-aa4d-c39199dc986c","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"COLLECTION","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this"}]}},{"type":"SpEL","id":null,"name":null,"valueType":"BOOLEAN","expression":{"@class":"JoiningTemplate","components":[{"@class":"Interpolation","hole":"1e82965d-0d18-4809-ae2a-f282d9609526","safelyInterpolatable":false},{"@class":"FixedTemplate","x":".containsAll(#this) and #this.containsAll("},{"@class":"Interpolation","hole":"1e82965d-0d18-4809-ae2a-f282d9609526","safelyInterpolatable":false},{"@class":"FixedTemplate","x":")"}]}}]},{"type":"coerce","valueType":"BOOLEAN"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"99773cbf-c9e5-3628-ae53-42dfcaa3f8b6","attributeDefinitionId":"0a862c8b-b70f-4ef6-bd4b-99c4448aaf52"},{"class":"ComparisonNode","id":"b0359e9f-17c6-3a60-879a-5b1b712de486","lhsInputNode":"99773cbf-c9e5-3628-ae53-42dfcaa3f8b6","rhsInputNode":"0420d4f9-6682-36bd-b12f-91b0ef6e4fd3","operator":"EQUALS"},{"class":"BooleanLogicNode","id":"0c0b1ec5-b0ee-3a0d-9156-deb000890645","inputNodes":["b0359e9f-17c6-3a60-879a-5b1b712de486"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"ccca7c0f-f754-40d1-8986-02696d4e04ee","name":"Check Consent Scope","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"8eb57c01-19c1-323d-b5b7-0d57b77de6a1","metadataId":"ccca7c0f-f754-40d1-8986-02696d4e04ee","effect":"PERMIT","inputNode":"0c0b1ec5-b0ee-3a0d-9156-deb000890645"},{"class":"StatementNode","id":"63149640-b85a-3e72-9d68-614bd14f1e9d","inputNode":"8eb57c01-19c1-323d-b5b7-0d57b77de6a1","metadataId":"ccca7c0f-f754-40d1-8986-02696d4e04ee","statements":[]},{"class":"TargetMatchNode","id":"d5a738bf-0d82-3823-ba83-12c5175f7dbc","inputNode":"63149640-b85a-3e72-9d68-614bd14f1e9d","metadataId":"ccca7c0f-f754-40d1-8986-02696d4e04ee","targets":[]},{"class":"AttributeDefinition","id":"4ae40ab7-33ed-4fb1-9dc0-d0c040b76596","name":"CDRAttributes.consent_record.status","resolvers":[{"class":"attribute","attributeDefinitionId":"2ade78e4-0f5e-4cd8-b861-90c4b9c20122","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.status"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"05472935-0cb6-36f1-88e2-8089c6385e7a","attributeDefinitionId":"4ae40ab7-33ed-4fb1-9dc0-d0c040b76596"},{"class":"ConstantNode","id":"a4aa7b2b-8141-3425-92e1-09f7c757e8aa","constant":"accepted"},{"class":"ComparisonNode","id":"3880545e-317c-3e2d-bbd6-1ec690c6f196","lhsInputNode":"05472935-0cb6-36f1-88e2-8089c6385e7a","rhsInputNode":"a4aa7b2b-8141-3425-92e1-09f7c757e8aa","operator":"NOT_EQUALS"},{"class":"BooleanLogicNode","id":"0e177cc3-5d5f-3940-a831-4e2b059ddffa","inputNodes":["3880545e-317c-3e2d-bbd6-1ec690c6f196"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"ed8b2d43-7eaa-44ce-baf1-f4e509d98a7d","name":"Check Consent Status","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"1a87830c-f4bc-3946-a411-f9b0c4e5fe24","metadataId":"ed8b2d43-7eaa-44ce-baf1-f4e509d98a7d","effect":"DENY","inputNode":"0e177cc3-5d5f-3940-a831-4e2b059ddffa"},{"class":"StatementNode","id":"56f531f3-c1a7-3e0e-8973-49e4cdab4d5b","inputNode":"1a87830c-f4bc-3946-a411-f9b0c4e5fe24","metadataId":"ed8b2d43-7eaa-44ce-baf1-f4e509d98a7d","statements":[]},{"class":"TargetMatchNode","id":"bf6992a4-4f62-3491-83b1-c4844b60c1ba","inputNode":"56f531f3-c1a7-3e0e-8973-49e4cdab4d5b","metadataId":"ed8b2d43-7eaa-44ce-baf1-f4e509d98a7d","targets":[]},{"class":"Metadata","originType":"Policy","originId":"3dc15f7c-9a55-4418-a7f6-30d75db0c41e","name":"Check Consent","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"655d24c2-bc7a-344b-8d14-fcb3b32c3e4b","combiningAlgorithm":{"name":"PermitUnlessDeny"},"inputNodes":["de5098fa-c900-319a-a843-b74634c2ca99","d5a738bf-0d82-3823-ba83-12c5175f7dbc","bf6992a4-4f62-3491-83b1-c4844b60c1ba"],"inputNodeWeights":[100,100,100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"3dc15f7c-9a55-4418-a7f6-30d75db0c41e"},{"class":"AttributeDefinition","id":"7b1a229a-74e7-45c1-980c-8bd7e235a35a","name":"CDRAttributes.consent_record.approved_accounts","resolvers":[{"class":"attribute","attributeDefinitionId":"2ade78e4-0f5e-4cd8-b861-90c4b9c20122","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"$.data.SELECTED_ACCOUNTS[0]"}]}},{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this.replace(\"[\",\"\").replace(\"]\",\"\").replace('\"',\"\")"}]}}]},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"StatementTemplate","id":"cb34f7e4-80e5-4afc-8b52-a69058982182","name":"Add X-Accounts","code":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"modify-headers"}]},"payload":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"{\"X-ACCOUNTS\": \""},{"@class":"Interpolation","hole":"7b1a229a-74e7-45c1-980c-8bd7e235a35a","safelyInterpolatable":false},{"@class":"FixedTemplate","x":"\"}"}]},"obligatory":true,"appliesTo":"ANYTHING","attributes":{},"services":{}},{"class":"StatementTemplate","id":"cb9a9c92-e1d8-44ae-a117-50a87cf9388d","name":"Add X-USER","code":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"modify-headers"}]},"payload":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"{\"X-USER\": \""},{"@class":"Interpolation","hole":"ee41314a-eb03-4a6e-9561-82ff8dd13865","safelyInterpolatable":false},{"@class":"FixedTemplate","x":"\"}"}]},"obligatory":true,"appliesTo":"ANYTHING","attributes":{},"services":{}},{"class":"StatementTemplate","id":"7da3a5e0-a4c9-486f-8ea7-a7e8413bb0ea","name":"Consent Not Active","code":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"denied-reason"}]},"payload":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"{ \"status\": 403, \"message\": \"consent_inactive\", \"detail\":\"Consent is not active\"}"}]},"obligatory":false,"appliesTo":"ANYTHING","attributes":{},"services":{}},{"class":"StatementNode","id":"caa8ceeb-97eb-3bc7-97eb-2fe2690bf7d8","inputNode":"655d24c2-bc7a-344b-8d14-fcb3b32c3e4b","metadataId":"3dc15f7c-9a55-4418-a7f6-30d75db0c41e","statements":["cb34f7e4-80e5-4afc-8b52-a69058982182","cb9a9c92-e1d8-44ae-a117-50a87cf9388d","7da3a5e0-a4c9-486f-8ea7-a7e8413bb0ea"]},{"class":"TargetMatchNode","id":"3757d93d-2e57-3411-82cd-8ba7ebc344d8","inputNode":"caa8ceeb-97eb-3bc7-97eb-2fe2690bf7d8","metadataId":"3dc15f7c-9a55-4418-a7f6-30d75db0c41e","targets":[]},{"class":"AttributeNode","id":"13fe8b2f-1faa-30cb-a22b-880fd4d3adfe","attributeDefinitionId":"7b1a229a-74e7-45c1-980c-8bd7e235a35a"},{"class":"AttributeDefinition","id":"262987d9-0d9c-4a05-b28a-fb53a2a6521e","name":"AccountResponse","resolvers":[],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeDefinition","id":"1f30e944-4d0a-43d0-a5df-3b585bb0018a","name":"AccountResponse.AccountId","resolvers":[{"class":"attribute","attributeDefinitionId":"262987d9-0d9c-4a05-b28a-fb53a2a6521e","condition":"6b0617b1-260a-362a-b56a-09d987f60632","expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"SpEL","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"#this"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"1147cca7-6a29-35dc-9335-7379061aa5ae","attributeDefinitionId":"1f30e944-4d0a-43d0-a5df-3b585bb0018a"},{"class":"ComparisonNode","id":"e946d08f-6490-3d6f-bcc9-6eb16b721ef9","lhsInputNode":"13fe8b2f-1faa-30cb-a22b-880fd4d3adfe","rhsInputNode":"1147cca7-6a29-35dc-9335-7379061aa5ae","operator":"CONTAINS"},{"class":"BooleanLogicNode","id":"df3f7ef9-1770-3b3e-bd01-ca2cda9935a9","inputNodes":["e946d08f-6490-3d6f-bcc9-6eb16b721ef9"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"9a8569c9-9b4d-423f-899c-d6728e19d8c6","name":"Check Account has been Consented","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"6ef4ae18-708f-369f-8c36-8b8f8c530a7c","metadataId":"9a8569c9-9b4d-423f-899c-d6728e19d8c6","effect":"PERMIT","inputNode":"df3f7ef9-1770-3b3e-bd01-ca2cda9935a9"},{"class":"StatementNode","id":"b36cea6c-0aec-33bc-84a3-10d4979ede90","inputNode":"6ef4ae18-708f-369f-8c36-8b8f8c530a7c","metadataId":"9a8569c9-9b4d-423f-899c-d6728e19d8c6","statements":[]},{"class":"TargetMatchNode","id":"a04bd129-8f3f-33f4-83c6-d93425362a0f","inputNode":"b36cea6c-0aec-33bc-84a3-10d4979ede90","metadataId":"9a8569c9-9b4d-423f-899c-d6728e19d8c6","targets":[]},{"class":"Metadata","originType":"Policy","originId":"d993e4db-c9c1-49f0-a75d-ea923dc7089c","name":"Check AccountId","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"a29d17b3-f91a-385a-a8ed-1b87893bb091","combiningAlgorithm":{"name":"DenyOverrides"},"inputNodes":["a04bd129-8f3f-33f4-83c6-d93425362a0f"],"inputNodeWeights":[100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"d993e4db-c9c1-49f0-a75d-ea923dc7089c"},{"class":"StatementNode","id":"0bc569d6-8b03-3ba9-9df9-ad36c59433cc","inputNode":"a29d17b3-f91a-385a-a8ed-1b87893bb091","metadataId":"d993e4db-c9c1-49f0-a75d-ea923dc7089c","statements":["7da3a5e0-a4c9-486f-8ea7-a7e8413bb0ea"]},{"class":"Target","id":"4f665ff8-27f5-42bc-9c7e-cc79dcb4ae61","name":"Inline target","domains":[],"services":[],"identityClassIds":[],"actions":["cdr-account-balance-request"]},{"class":"TargetMatchNode","id":"865e64cc-6d47-3a27-978c-8862a89dab68","inputNode":"0bc569d6-8b03-3ba9-9df9-ad36c59433cc","metadataId":"d993e4db-c9c1-49f0-a75d-ea923dc7089c","targets":["4f665ff8-27f5-42bc-9c7e-cc79dcb4ae61"]},{"class":"AttributeDefinition","id":"70f94c27-358f-4a20-a968-43799acd3d1b","name":"HttpRequest.ResourcePath","resolvers":[{"class":"attribute","attributeDefinitionId":"a007b39b-33ca-436c-977f-21a4831daa96","condition":null,"expression":null}],"defaultValue":null,"cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"chain","expressions":[{"type":"jsonPath","id":null,"name":null,"valueType":"STRING","expression":{"@class":"JoiningTemplate","components":[{"@class":"FixedTemplate","x":"ResourcePath"}]}},{"type":"coerce","valueType":"STRING"}]},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"fddba023-dc6b-36ae-a013-4ff844e031a6","attributeDefinitionId":"70f94c27-358f-4a20-a968-43799acd3d1b"},{"class":"ConstantNode","id":"bf042878-ba87-347d-b7a1-1628be5f603c","constant":"accounts"},{"class":"ComparisonNode","id":"5111029f-c197-3512-b521-0f6c8436abd0","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"bf042878-ba87-347d-b7a1-1628be5f603c","operator":"EQUALS"},{"class":"ConstantNode","id":"d2a32dac-ff82-3ca4-81d2-373f17c89de9","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}/balance"},{"class":"ComparisonNode","id":"6973a187-2224-3d20-ae56-970be3e1851c","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"d2a32dac-ff82-3ca4-81d2-373f17c89de9","operator":"REGULAR_EXPRESSION"},{"class":"ConstantNode","id":"618b4cd6-8b97-3dd7-9a4e-1741f6e38ff5","constant":"accounts/balances"},{"class":"ComparisonNode","id":"bce68844-c71b-3647-8904-0eeb5130b95b","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"618b4cd6-8b97-3dd7-9a4e-1741f6e38ff5","operator":"EQUALS"},{"class":"BooleanLogicNode","id":"97bdb27c-cbac-3a8a-b829-1699e79505ef","inputNodes":["5111029f-c197-3512-b521-0f6c8436abd0","6973a187-2224-3d20-ae56-970be3e1851c","bce68844-c71b-3647-8904-0eeb5130b95b"],"operator":"or"},{"class":"AttributeDefinition","id":"4d7994a5-a83c-4251-87dd-9320535d001d","name":"CDRAttributes.CDRScope.AccountsRead","resolvers":[],"defaultValue":"bank:accounts.basic:read","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"87cdad52-5836-35db-b92c-c600a96b0f0c","attributeDefinitionId":"4d7994a5-a83c-4251-87dd-9320535d001d"},{"class":"ComparisonNode","id":"198b47a2-0463-3b5d-acb6-17ab532533b4","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"87cdad52-5836-35db-b92c-c600a96b0f0c","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"1a3f7ce0-bd9b-3701-88fc-a999617bad2e","inputNodes":["97bdb27c-cbac-3a8a-b829-1699e79505ef","198b47a2-0463-3b5d-acb6-17ab532533b4"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"927132ad-47d7-46a3-8732-a7a35d5f1ede","name":"Check Banking Account URL","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"0ec2d91a-5d22-3011-8014-abd6f62563fd","metadataId":"927132ad-47d7-46a3-8732-a7a35d5f1ede","effect":"DENY","inputNode":"1a3f7ce0-bd9b-3701-88fc-a999617bad2e"},{"class":"StatementNode","id":"0c9b7a71-6243-31eb-8d04-cf65d8d442fd","inputNode":"0ec2d91a-5d22-3011-8014-abd6f62563fd","metadataId":"927132ad-47d7-46a3-8732-a7a35d5f1ede","statements":[]},{"class":"TargetMatchNode","id":"71f26b83-bc9d-375e-9bf4-bb63617c9fd7","inputNode":"0c9b7a71-6243-31eb-8d04-cf65d8d442fd","metadataId":"927132ad-47d7-46a3-8732-a7a35d5f1ede","targets":[]},{"class":"ConstantNode","id":"b8727779-bd71-3475-b24c-750c000ea7af","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}"},{"class":"ComparisonNode","id":"186debad-57f4-3098-a111-d9e683dc6bee","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"b8727779-bd71-3475-b24c-750c000ea7af","operator":"REGULAR_EXPRESSION"},{"class":"AttributeDefinition","id":"7396cbde-586b-4426-afc7-0091b95d77d2","name":"CDRAttributes.CDRScope.AccountsDetailRead","resolvers":[],"defaultValue":"bank:accounts.detail:read","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"1183bde1-af6b-34d9-8141-2131cf1a2bea","attributeDefinitionId":"7396cbde-586b-4426-afc7-0091b95d77d2"},{"class":"ComparisonNode","id":"754bbece-a244-3a82-aa44-3fcd483046cf","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"1183bde1-af6b-34d9-8141-2131cf1a2bea","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"6c97c161-18d1-3af3-9dc2-c7d0188b3235","inputNodes":["186debad-57f4-3098-a111-d9e683dc6bee","754bbece-a244-3a82-aa44-3fcd483046cf"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"0b293278-f7bf-41a6-a6a7-5df87aad192a","name":"Check Detail Banking Account URL","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"d3fb8fbd-8530-3bdd-8158-fa6c3d9c22ed","metadataId":"0b293278-f7bf-41a6-a6a7-5df87aad192a","effect":"DENY","inputNode":"6c97c161-18d1-3af3-9dc2-c7d0188b3235"},{"class":"StatementNode","id":"8d39ccb8-52a1-302a-9215-f4bc6c0c8c54","inputNode":"d3fb8fbd-8530-3bdd-8158-fa6c3d9c22ed","metadataId":"0b293278-f7bf-41a6-a6a7-5df87aad192a","statements":[]},{"class":"TargetMatchNode","id":"a44cbf90-a690-3825-89ad-9b3568b4c68e","inputNode":"8d39ccb8-52a1-302a-9215-f4bc6c0c8c54","metadataId":"0b293278-f7bf-41a6-a6a7-5df87aad192a","targets":[]},{"class":"ConstantNode","id":"52d388ae-2d63-3ab8-8e81-b7707744cc8a","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}/transactions"},{"class":"ComparisonNode","id":"486408a0-a418-3c6a-9eb4-6f77ee5ef9f9","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"52d388ae-2d63-3ab8-8e81-b7707744cc8a","operator":"REGULAR_EXPRESSION"},{"class":"ConstantNode","id":"fdb91085-7d4e-3125-8877-754e64084d66","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}/transactions/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}"},{"class":"ComparisonNode","id":"46728831-e6a4-33ca-83d3-1cc862965b69","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"fdb91085-7d4e-3125-8877-754e64084d66","operator":"REGULAR_EXPRESSION"},{"class":"BooleanLogicNode","id":"2e19089d-3e27-3470-94e2-3b9909885574","inputNodes":["486408a0-a418-3c6a-9eb4-6f77ee5ef9f9","46728831-e6a4-33ca-83d3-1cc862965b69"],"operator":"or"},{"class":"AttributeDefinition","id":"5b1fc7dc-5a88-4404-bccf-24cc7634adc7","name":"CDRAttributes.CDRScope.TransactionsRead","resolvers":[],"defaultValue":"bank:transactions:read","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"07877b07-b0cc-3129-8456-61522d4ab577","attributeDefinitionId":"5b1fc7dc-5a88-4404-bccf-24cc7634adc7"},{"class":"ComparisonNode","id":"90e97b00-eb84-35d9-8ae2-c3f5f7ab0058","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"07877b07-b0cc-3129-8456-61522d4ab577","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"85a6ee98-27f0-3e6e-8a21-4c6e02e63bde","inputNodes":["2e19089d-3e27-3470-94e2-3b9909885574","90e97b00-eb84-35d9-8ae2-c3f5f7ab0058"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"ef121ad2-6f7d-40dc-8486-8966685bda61","name":"Check Transaction URL","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"7a665d59-7cdc-3154-954d-c4877149b15c","metadataId":"ef121ad2-6f7d-40dc-8486-8966685bda61","effect":"DENY","inputNode":"85a6ee98-27f0-3e6e-8a21-4c6e02e63bde"},{"class":"StatementNode","id":"0f8b1610-554f-3022-a754-42fe50ddbb79","inputNode":"7a665d59-7cdc-3154-954d-c4877149b15c","metadataId":"ef121ad2-6f7d-40dc-8486-8966685bda61","statements":[]},{"class":"TargetMatchNode","id":"7067a083-4676-3a45-8318-a74d8d487405","inputNode":"0f8b1610-554f-3022-a754-42fe50ddbb79","metadataId":"ef121ad2-6f7d-40dc-8486-8966685bda61","targets":[]},{"class":"ConstantNode","id":"dae4b4e7-48ee-3724-9ea2-1335c498932c","constant":"accounts/direct-debits"},{"class":"ComparisonNode","id":"b46e4123-fbe1-3474-92a7-b3ce942c2326","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"dae4b4e7-48ee-3724-9ea2-1335c498932c","operator":"EQUALS"},{"class":"ConstantNode","id":"119d0b90-916f-314b-8fe2-76e1cd569681","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}/direct-debits"},{"class":"ComparisonNode","id":"4001d0a0-5dc0-3d95-8cc9-a0993998bf07","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"119d0b90-916f-314b-8fe2-76e1cd569681","operator":"REGULAR_EXPRESSION"},{"class":"ConstantNode","id":"7ac1e471-35c7-3202-b21c-a54b6af158db","constant":"payments/scheduled"},{"class":"ComparisonNode","id":"b09b6d2f-254b-3d07-a684-1673f836c68c","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"7ac1e471-35c7-3202-b21c-a54b6af158db","operator":"EQUALS"},{"class":"ConstantNode","id":"542c9c74-8295-3312-a3ab-b2e39ea43ad2","constant":"accounts/[\\w]{8}(-[\\w]{4}){3}-[\\w]{12}/payments/scheduled"},{"class":"ComparisonNode","id":"7d0f7ee0-4bb7-37f7-8be2-4e8c0c29ccfb","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"542c9c74-8295-3312-a3ab-b2e39ea43ad2","operator":"REGULAR_EXPRESSION"},{"class":"BooleanLogicNode","id":"da7d0a61-1316-3d58-afaa-76267623b48b","inputNodes":["b46e4123-fbe1-3474-92a7-b3ce942c2326","4001d0a0-5dc0-3d95-8cc9-a0993998bf07","b09b6d2f-254b-3d07-a684-1673f836c68c","7d0f7ee0-4bb7-37f7-8be2-4e8c0c29ccfb"],"operator":"or"},{"class":"AttributeDefinition","id":"649be381-0ef5-4c67-a24d-d5c78f87f297","name":"CDRAttributes.CDRScope.RegularPaymentsRead","resolvers":[],"defaultValue":"bank:regular_payments:read","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"562db7e3-9f1d-3474-adf8-6c2a26018552","attributeDefinitionId":"649be381-0ef5-4c67-a24d-d5c78f87f297"},{"class":"ComparisonNode","id":"7e8de558-0b64-32dd-9293-430659082232","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"562db7e3-9f1d-3474-adf8-6c2a26018552","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"6442ca2f-10b5-3d3b-a2b7-5b84eb369cd6","inputNodes":["da7d0a61-1316-3d58-afaa-76267623b48b","7e8de558-0b64-32dd-9293-430659082232"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"fb725696-5ff8-40fc-ac54-23d1ada9309a","name":"Check Direct Debit and Schedule URL","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"e532c914-16af-34d2-98af-2760f584527a","metadataId":"fb725696-5ff8-40fc-ac54-23d1ada9309a","effect":"DENY","inputNode":"6442ca2f-10b5-3d3b-a2b7-5b84eb369cd6"},{"class":"StatementNode","id":"9da05877-4339-3057-a9cb-e4a96921c65b","inputNode":"e532c914-16af-34d2-98af-2760f584527a","metadataId":"fb725696-5ff8-40fc-ac54-23d1ada9309a","statements":[]},{"class":"TargetMatchNode","id":"bb9b4345-bf6a-3f08-b36b-68dc6b7ef9ff","inputNode":"9da05877-4339-3057-a9cb-e4a96921c65b","metadataId":"fb725696-5ff8-40fc-ac54-23d1ada9309a","targets":[]},{"class":"ConstantNode","id":"7bb179df-237b-3583-92c6-d5fb3b992fe6","constant":"payees"},{"class":"ComparisonNode","id":"734e4e9b-749c-3af7-8088-e1f18c3a6c38","lhsInputNode":"fddba023-dc6b-36ae-a013-4ff844e031a6","rhsInputNode":"7bb179df-237b-3583-92c6-d5fb3b992fe6","operator":"STARTS_WITH"},{"class":"BooleanLogicNode","id":"0952e818-6edb-318f-b889-fe8f11bf52ed","inputNodes":["734e4e9b-749c-3af7-8088-e1f18c3a6c38"],"operator":"or"},{"class":"AttributeDefinition","id":"cd89a863-3a7e-44d5-a344-baecbcbf13f6","name":"CDRAttributes.CDRScope.PayeesRead","resolvers":[],"defaultValue":"bank:payees:read","cacheScopeAttributeId":null,"cacheTimeToLive":0,"cacheStrategy":"NO_CACHING","isSecret":false,"expression":{"type":"coerce","valueType":"STRING"},"properties":{},"repetitionSourceAttributeId":null},{"class":"AttributeNode","id":"aacd9fa1-d93e-3856-b095-f41ef676458e","attributeDefinitionId":"cd89a863-3a7e-44d5-a344-baecbcbf13f6"},{"class":"ComparisonNode","id":"e17ddd1a-0536-393c-8d07-708300de4743","lhsInputNode":"5598fb7f-e135-3d84-8aeb-b59e12ea1d9c","rhsInputNode":"aacd9fa1-d93e-3856-b095-f41ef676458e","operator":"NOT_CONTAINS"},{"class":"BooleanLogicNode","id":"1d6e859f-837b-3670-abbe-4365f194e483","inputNodes":["0952e818-6edb-318f-b889-fe8f11bf52ed","e17ddd1a-0536-393c-8d07-708300de4743"],"operator":"and"},{"class":"Metadata","originType":"Rule","originId":"1b5349fd-5da2-4707-ba32-838538f88ca6","name":"Check Payee URL","properties":{},"disabled":false,"repetitionSettings":null},{"class":"DecisionNode","id":"c005acae-923a-3998-ac67-72a9077bc6d3","metadataId":"1b5349fd-5da2-4707-ba32-838538f88ca6","effect":"DENY","inputNode":"1d6e859f-837b-3670-abbe-4365f194e483"},{"class":"StatementNode","id":"35058808-f79a-3a51-b115-70108c2eb48c","inputNode":"c005acae-923a-3998-ac67-72a9077bc6d3","metadataId":"1b5349fd-5da2-4707-ba32-838538f88ca6","statements":[]},{"class":"TargetMatchNode","id":"69959f79-7570-3784-b937-160f9b38f1ba","inputNode":"35058808-f79a-3a51-b115-70108c2eb48c","metadataId":"1b5349fd-5da2-4707-ba32-838538f88ca6","targets":[]},{"class":"Metadata","originType":"Policy","originId":"1d1df0fe-ef91-4b52-b4b1-d77114ef3a8c","name":"Check URL Scope","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"573ada95-30dc-3fb4-b8c5-61a46dbcb1f7","combiningAlgorithm":{"name":"PermitUnlessDeny"},"inputNodes":["71f26b83-bc9d-375e-9bf4-bb63617c9fd7","a44cbf90-a690-3825-89ad-9b3568b4c68e","7067a083-4676-3a45-8318-a74d8d487405","bb9b4345-bf6a-3f08-b36b-68dc6b7ef9ff","69959f79-7570-3784-b937-160f9b38f1ba"],"inputNodeWeights":[100,100,100,100,100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"1d1df0fe-ef91-4b52-b4b1-d77114ef3a8c"},{"class":"StatementNode","id":"1fc0f256-9edd-3953-899e-af4bd81ea140","inputNode":"573ada95-30dc-3fb4-b8c5-61a46dbcb1f7","metadataId":"1d1df0fe-ef91-4b52-b4b1-d77114ef3a8c","statements":[]},{"class":"TargetMatchNode","id":"5e1222e6-43b1-39ae-a928-3d56cdf515d6","inputNode":"1fc0f256-9edd-3953-899e-af4bd81ea140","metadataId":"1d1df0fe-ef91-4b52-b4b1-d77114ef3a8c","targets":[]},{"class":"Metadata","originType":"PolicySet","originId":"8c8f030f-ffca-4509-98b9-891d46e4eabe","name":"CDR Policy","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"5238423f-d8b9-3dd8-9bfb-664962641570","combiningAlgorithm":{"name":"DenyOverrides"},"inputNodes":["3757d93d-2e57-3411-82cd-8ba7ebc344d8","865e64cc-6d47-3a27-978c-8862a89dab68","5e1222e6-43b1-39ae-a928-3d56cdf515d6"],"inputNodeWeights":[100,100,100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"8c8f030f-ffca-4509-98b9-891d46e4eabe"},{"class":"StatementNode","id":"8ba93dbd-7f11-3deb-ad8f-5183410c2cff","inputNode":"5238423f-d8b9-3dd8-9bfb-664962641570","metadataId":"8c8f030f-ffca-4509-98b9-891d46e4eabe","statements":[]},{"class":"Target","id":"0451d509-113c-46ce-a2a4-bc58d906fbc9","name":"Inline target","domains":[],"services":["BankingAPI"],"identityClassIds":[],"actions":["inbound-GET","inbound-POST","inbound-PUT","inbound-DELETE"]},{"class":"TargetMatchNode","id":"9c80ec67-ec8e-3cb7-97c0-8576c8680fa7","inputNode":"8ba93dbd-7f11-3deb-ad8f-5183410c2cff","metadataId":"8c8f030f-ffca-4509-98b9-891d46e4eabe","targets":["0451d509-113c-46ce-a2a4-bc58d906fbc9"]},{"class":"Metadata","originType":"PolicySet","originId":"e51688ff-1dc9-4b6c-bb36-8af64d02e9d1","name":"Global Decision Point","properties":{},"disabled":false,"repetitionSettings":null},{"class":"CombinedDecisionNode","id":"3e8e3b23-1b27-3931-9e4a-ba89b96f1309","combiningAlgorithm":{"name":"DenyOverrides"},"inputNodes":["296b80e0-3967-3376-ab6a-49521b0bc76e","65ecd853-cb06-3565-9457-d1a4cc2416dc","9c80ec67-ec8e-3cb7-97c0-8576c8680fa7"],"inputNodeWeights":[100,100,100],"guardNode":"6b0617b1-260a-362a-b56a-09d987f60632","originLink":"e51688ff-1dc9-4b6c-bb36-8af64d02e9d1"},{"class":"StatementNode","id":"d74e5cec-2ca4-3639-ac16-ca8844afd013","inputNode":"3e8e3b23-1b27-3931-9e4a-ba89b96f1309","metadataId":"e51688ff-1dc9-4b6c-bb36-8af64d02e9d1","statements":[]},{"class":"TargetMatchNode","id":"0f358792-cab3-335f-8a51-eeecfc846c05","inputNode":"d74e5cec-2ca4-3639-ac16-ca8844afd013","metadataId":"e51688ff-1dc9-4b6c-bb36-8af64d02e9d1","targets":[]},{"@class":"DataStreamFooter","digest":"ISAb9/flljo3PNa9KU9EyOqcXuIFXSMlUH1fbWgQ898="}]